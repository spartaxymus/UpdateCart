{"ast":null,"code":"import t, { createContext as n, useReducer as e, useContext as r } from \"react\";\n\nfunction i(t, n, e) {\n  return n in t ? Object.defineProperty(t, n, {\n    value: e,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : t[n] = e, t;\n}\n\nfunction u(t) {\n  for (var n = 1; n < arguments.length; n++) {\n    var e = null != arguments[n] ? arguments[n] : {},\n        r = Object.keys(e);\n    \"function\" == typeof Object.getOwnPropertySymbols && (r = r.concat(Object.getOwnPropertySymbols(e).filter(function (t) {\n      return Object.getOwnPropertyDescriptor(e, t).enumerable;\n    }))), r.forEach(function (n) {\n      i(t, n, e[n]);\n    });\n  }\n\n  return t;\n}\n\nfunction o(t) {\n  return function (t) {\n    if (Array.isArray(t)) {\n      for (var n = 0, e = new Array(t.length); n < t.length; n++) e[n] = t[n];\n\n      return e;\n    }\n  }(t) || function (t) {\n    if (Symbol.iterator in Object(t) || \"[object Arguments]\" === Object.prototype.toString.call(t)) return Array.from(t);\n  }(t) || function () {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n  }();\n}\n\nvar a = function (t, n) {\n  var e = t.items.findIndex(function (t) {\n    return t.sku === n.payload.sku;\n  });\n\n  if (e > -1) {\n    var r = o(t.items);\n    return r[e].quantity += n.payload.quantity, r;\n  }\n\n  return [].concat(o(t.items), [n.payload]);\n},\n    c = function (t, n) {\n  return t.items.reduce(function (t, e) {\n    if (e.sku === n.payload.sku) {\n      var r = e.quantity - n.payload.quantity;\n      return r > 0 ? [].concat(o(t), [u({}, e, {\n        quantity: r\n      })]) : o(t);\n    }\n\n    return [].concat(o(t), [e]);\n  }, []);\n},\n    f = function (t, n) {\n  return t.items.filter(function (t) {\n    return t.sku !== n.payload.sku;\n  });\n},\n    l = function (t, n) {\n  switch (n.type) {\n    case \"ADD_ITEM\":\n      return {\n        items: a(t, n)\n      };\n\n    case \"REMOVE_ITEM\":\n      return {\n        items: c(t, n)\n      };\n\n    case \"REMOVE_LINE_ITEM\":\n      return {\n        items: f(t, n)\n      };\n\n    case \"CLEAR_CART\":\n      return {\n        items: []\n      };\n  }\n},\n    s = n(),\n    y = function (n) {\n  var r,\n      i = n.children,\n      u = n.initialCart,\n      o = function (t) {\n    if (Array.isArray(t)) return t;\n  }(r = e(l, {\n    items: void 0 === u ? [] : u\n  })) || function (t, n) {\n    var e = [],\n        r = !0,\n        i = !1,\n        u = void 0;\n\n    try {\n      for (var o, a = t[Symbol.iterator](); !(r = (o = a.next()).done) && (e.push(o.value), 2 !== e.length); r = !0);\n    } catch (t) {\n      i = !0, u = t;\n    } finally {\n      try {\n        r || null == a.return || a.return();\n      } finally {\n        if (i) throw u;\n      }\n    }\n\n    return e;\n  }(r) || function () {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n  }(),\n      a = o[0],\n      c = o[1],\n      f = a.items.reduce(function (t, n) {\n    return t + n.quantity;\n  }, 0);\n\n  return t.createElement(s.Provider, {\n    value: {\n      items: a.items,\n      lineItemsCount: a.items.length,\n      itemsCount: f,\n      addItem: function (t) {\n        c({\n          type: \"ADD_ITEM\",\n          payload: {\n            sku: t,\n            quantity: arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1\n          }\n        });\n      },\n      removeItem: function (t) {\n        c({\n          type: \"REMOVE_ITEM\",\n          payload: {\n            sku: t,\n            quantity: arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1\n          }\n        });\n      },\n      removeLineItem: function (t) {\n        c({\n          type: \"REMOVE_LINE_ITEM\",\n          payload: {\n            sku: t\n          }\n        });\n      },\n      clearCart: function () {\n        c({\n          type: \"CLEAR_CART\"\n        });\n      },\n      isInCart: function (t) {\n        return a.items.some(function (n) {\n          return n.sku === t;\n        });\n      }\n    }\n  }, i);\n},\n    m = function () {\n  return r(s);\n};\n\nexport { y as CartProvider, m as useCart };","map":{"version":3,"sources":["../src/reducer.js","../src/use-cart.js"],"names":["addItemReducer","state","action","existingItemIndex","items","findIndex","item","sku","payload","newState","quantity","removeItemReducer","reduce","acc","newQuantity","removeLineItemReducer","filter","reducer","type","CartContext","createContext","CartProvider","children","initialCart","dispatch","useReducer","getItemsCount","some","React","Provider","value","lineItemsCount","length","itemsCount","addItem","removeItem","removeLineItem","clearCart","isInCart","useCart","useContext"],"mappings":"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","sourcesContent":["const addItemReducer = (state, action) => {\n  const existingItemIndex = state.items.findIndex(\n    item => item.sku === action.payload.sku\n  )\n\n  if (existingItemIndex > -1) {\n    const newState = [...state.items]\n    newState[existingItemIndex].quantity += action.payload.quantity\n    return newState\n  }\n  return [...state.items, action.payload]\n}\n\nconst removeItemReducer = (state, action) => {\n  return state.items.reduce((acc, item) => {\n    if (item.sku === action.payload.sku) {\n      const newQuantity = item.quantity - action.payload.quantity\n\n      return newQuantity > 0\n        ? [...acc, { ...item, quantity: newQuantity }]\n        : [...acc]\n    }\n    return [...acc, item]\n  }, [])\n}\n\nconst removeLineItemReducer = (state, action) => {\n  return state.items.filter(item => item.sku !== action.payload.sku)\n}\n\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case \"ADD_ITEM\":\n      return { items: addItemReducer(state, action) }\n    case \"REMOVE_ITEM\":\n      return { items: removeItemReducer(state, action) }\n    case \"REMOVE_LINE_ITEM\":\n      return { items: removeLineItemReducer(state, action) }\n    case \"CLEAR_CART\":\n      return { items: [] }\n  }\n}\n","import React, { useReducer, useContext, createContext } from \"react\"\nimport { reducer } from \"./reducer\"\nconst CartContext = createContext()\n\nexport const CartProvider = ({ children, initialCart = [] }) => {\n  const [state, dispatch] = useReducer(reducer, { items: initialCart })\n\n  const addItemHandler = (sku, quantity = 1) => {\n    dispatch({ type: \"ADD_ITEM\", payload: { sku, quantity } })\n  }\n\n  const removeItemHandler = (sku, quantity = 1) => {\n    dispatch({ type: \"REMOVE_ITEM\", payload: { sku, quantity } })\n  }\n\n  const getItemsCount = state.items.reduce(\n    (acc, item) => acc + item.quantity,\n    0\n  )\n\n  const removeLineItemHandler = sku => {\n    dispatch({ type: \"REMOVE_LINE_ITEM\", payload: { sku } })\n  }\n\n  const clearCartHandler = () => {\n    dispatch({ type: \"CLEAR_CART\" })\n  }\n\n  const isInCartHandler = sku => {\n    return state.items.some(item => item.sku === sku)\n  }\n\n  return (\n    <CartContext.Provider\n      value={{\n        items: state.items,\n        lineItemsCount: state.items.length,\n        itemsCount: getItemsCount,\n        addItem: addItemHandler,\n        removeItem: removeItemHandler,\n        removeLineItem: removeLineItemHandler,\n        clearCart: clearCartHandler,\n        isInCart: isInCartHandler\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  )\n}\n\nexport const useCart = () => useContext(CartContext)\n"]},"metadata":{},"sourceType":"module"}